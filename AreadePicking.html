<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuestionario: Área de Picking</title>
    <!-- Carga de Tailwind CSS para el diseño --><script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary-color: #3b82f6; /* Blue-500 */
            --secondary-color: #10b981; /* Emerald-500 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Gray-100 */
        }
        .answer-option {
            cursor: pointer;
            transition: all 0.2s;
            background-color: #ffffff;
            border: 1px solid #d1d5db; /* Gray-300 */
            color: #374151; /* Gray-700 */
            padding: 1rem;
            border-radius: 0.5rem;
            font-size: 0.95rem;
        }
        .answer-option:hover:not(.options-disabled) {
            background-color: #eff6ff; /* Blue-50 */
            border-color: var(--primary-color);
        }
        .correct {
            background-color: #d1fae5 !important; /* Green-100 */
            border-color: var(--secondary-color) !important;
            color: #065f46 !important; /* Green-800 */
            font-weight: 600;
        }
        .incorrect {
            background-color: #fee2e2 !important; /* Red-100 */
            border-color: #ef4444 !important; /* Red-500 */
            color: #991b1b !important; /* Red-800 */
            font-weight: 600;
        }
        .options-disabled > .answer-option {
            pointer-events: none;
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen flex items-center justify-center">

    <div id="quiz-container" class="w-full max-w-lg bg-white shadow-xl rounded-xl p-6 md:p-8">
        
        <!-- Vista de Pregunta --><div id="question-view">
            <!-- Contador y Puntaje --><div id="status-bar" class="flex flex-col sm:flex-row justify-between items-start sm:items-center text-sm font-medium text-gray-600 mb-6 space-y-2 sm:space-y-0">
                <span id="question-counter" class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full w-full sm:w-auto text-center">Pregunta 1 de 25</span>
                <span id="score-display" class="bg-green-100 text-green-800 px-3 py-1 rounded-full w-full sm:w-auto text-center">Puntaje: 0</span>
            </div>

            <h2 id="question-text" class="text-xl font-semibold text-gray-700 mb-6"></h2>
            <div id="answer-options-wrapper" class="space-y-4">
                <!-- Opciones se insertan aquí --></div>
        </div>

        <!-- Vista de Resultados --><div id="results-view" class="hidden text-center p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">¡Lo has conseguido! Has completado el cuestionario.</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <div class="bg-blue-50 p-4 rounded-lg shadow-inner border-t-4 border-blue-400">
                    <p class="text-sm font-medium text-gray-500 mb-1">Puntuación</p>
                    <p id="final-score-box" class="text-4xl font-bold text-blue-600">0/25</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg shadow-inner border-t-4 border-green-400">
                    <p class="text-sm font-medium text-gray-500 mb-1">Precisión</p>
                    <p id="precision-box" class="text-4xl font-bold text-green-600">0%</p>
                </div>
                <div class="bg-gray-50 p-4 rounded-lg shadow-inner text-left text-sm border-t-4 border-gray-400">
                    <div class="flex justify-between items-center py-1">
                        <span class="text-gray-600 font-semibold">Correctas</span>
                        <span id="correct-count" class="font-bold text-lg text-green-600">0</span>
                    </div>
                    <div class="flex justify-between items-center py-1">
                        <span class="text-gray-600 font-semibold">Incorrectas</span>
                        <span id="incorrect-count" class="font-bold text-lg text-red-600">0</span>
                    </div>
                     <div class="flex justify-between items-center py-1 border-t mt-2 pt-2">
                        <span class="text-gray-800 font-bold">Total Preguntas</span>
                        <span id="total-summary" class="font-bold text-lg text-gray-800">25</span>
                    </div>
                </div>
            </div>
            
            <!-- Botón Volver al Inicio (va a index.html) -->
            <button id="restart-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-200 shadow-lg mt-8">
                Volver al Inicio
            </button>
        </div>

        <!-- Mensaje de Racional (oculto) --><div id="rationale-box" class="mt-6 p-4 border-l-4 border-blue-500 bg-blue-50 hidden rounded-md shadow-inner">
            <p class="font-bold text-blue-800">Razón:</p>
            <p id="rationale-text" class="text-sm text-blue-700 mt-1"></p>
        </div>

        <!-- Controles --><div id="controls" class="mt-6 flex justify-end space-x-4">
            <button id="next-button" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-lg transition duration-200 hidden shadow-md">
                Siguiente
            </button>
        </div>
    </div>

    <script>
        // Array de 25 preguntas
        const quizData = [
            {
                q: "¿Cuál es la fase crucial en AzulMarket orientada a la preparación eficiente de pedidos?",
                options: [
                    "La fase de Consolidación.",
                    "El área de Picking.",
                    "La fase de Despacho.",
                    "La Recepción de productos."
                ],
                answer: 1,
                rationale: "La introducción (Pág. 2) define el área de picking como la 'fase crucial' para la 'preparación eficiente de pedidos'."
            },
            {
                q: "¿Qué dos factores determinan la satisfacción del cliente y la rentabilidad?",
                options: [
                    "La precisión y la velocidad en el picking.",
                    "El layout de la bodega y la tecnología RFID.",
                    "La capacitación del personal y la ergonomía.",
                    "El tipo de estantería y los carros de picking."
                ],
                answer: 0,
                rationale: "La página 3 indica que 'La precisión y velocidad en el picking determinan la satisfacción del cliente y la rentabilidad'."
            },
            {
                q: "¿Cuál es un objetivo principal del picking en AzulMarket?",
                options: [
                    "Aumentar el tiempo de ciclo de los pedidos.",
                    "Implementar únicamente el picking por pedido.",
                    "Optimizar recursos, minimizar errores y asegurar una entrega oportuna.",
                    "Incrementar el stock de seguridad en la bodega."
                ],
                answer: 2,
                rationale: "La página 4 lista los objetivos como: 'Optimizar recursos, minimizar errores y asegurar una entrega oportuna'."
            },
            {
                q: "¿Cuáles son las 5 zonas operativas principales del layout de la bodega?",
                options: [
                    "Recepción, Almacenamiento, Picking, Consolidación y Despacho.",
                    "Recepción, Auditoría, Zona Fría, Zona Seca y Salida.",
                    "Oficinas, Casino, Bodega, Sala de Ventas y Estacionamiento.",
                    "Zona A, Zona B, Zona C, Zona D y Zona E."
                ],
                answer: 0,
                rationale: "Las páginas 6 y 7 listan las 5 zonas como: Recepción, Almacenamiento, Picking, Consolidación y Despacho."
            },
            {
                q: "¿Cuál de estos NO es un tipo de picking?",
                options: [
                    "Picking por pedido",
                    "Picking por zona",
                    "Picking por olas",
                    "Picking por color"
                ],
                answer: 3,
                rationale: "La página 8 menciona 'picking por pedido, por zona, por lote y por olas'. 'Picking por color' no se menciona como uno de los tipos principales."
            },
            {
                q: "¿Para qué tipo de pedidos es ideal el 'Picking por Pedido'?",
                options: [
                    "Pedidos de gran volumen y alta rotación.",
                    "Pedidos que se agrupan por similitud de artículos.",
                    "Volúmenes pequeños y personalizados.",
                    "Pedidos que requieren múltiples operadores."
                ],
                answer: 2,
                rationale: "La página 9 indica que el 'Picking por Pedido' es 'ideal para volúmenes pequeños y personalizados'."
            },
            {
                q: "¿Qué método de picking consiste en que cada operador se encarga de una sección específica de la bodega?",
                options: [
                    "Picking por Lote",
                    "Picking por Olas",
                    "Picking por Pedido",
                    "Picking por Zona"
                ],
                answer: 3,
                rationale: "La página 10 define 'Picking por Zona' como 'Cada picker se encarga de una sección específica de la bodega'."
            },
            {
                q: "¿Cómo se define el 'Picking por Olas'?",
                options: [
                    "Cada operador prepara un pedido completo.",
                    "Los pedidos se agrupan por similitud de artículos, reduciendo desplazamientos.",
                    "Se utiliza solo para productos de baja rotación.",
                    "El software guía al operador a la ubicación exacta."
                ],
                answer: 1,
                rationale: "La página 11 explica que en el 'Picking por Olas', 'Los pedidos se agrupan por similitud de artículos'."
            },
            {
                q: "¿Cuál es el primer paso en el flujo del proceso de picking?",
                options: [
                    "La localización del producto en la estantería.",
                    "La recepción de la orden mediante el sistema WMS.",
                    "La consolidación de los productos.",
                    "El escaneo del ítem para verificación."
                ],
                answer: 1,
                rationale: "La página 13 (Inicio del Proceso) indica que 'El picking comienza con la recepción de la orden mediante el sistema WMS'."
            },
            {
                q: "¿Qué tecnología utiliza el sistema WMS para guiar al operador a la ubicación exacta del producto?",
                options: [
                    "GPS y satélites.",
                    "Mapas impresos y listas de papel.",
                    "Radiofrecuencia o dispositivos móviles.",
                    "Señalización con luces LED únicamente."
                ],
                answer: 2,
                rationale: "La página 14 (Localización de Productos) menciona que el software guía al operador 'mediante radiofrecuencia o dispositivos móviles'."
            },
            {
                q: "¿Qué acción se realiza durante la fase de 'Extracción y Verificación'?",
                options: [
                    "Se agrupan los productos para despacho.",
                    "El supervisor asigna la tarea al picker.",
                    "Cada ítem se escanea para confirmar su exactitud y cantidad.",
                    "Se revisan las condiciones del producto (Control de Calidad)."
                ],
                answer: 2,
                rationale: "La página 15 (Extracción y Verificación) indica que 'Cada ítem se escanea para confirmar su exactitud y cantidad'."
            },
            {
                q: "La fase donde 'los productos seleccionados se agrupan, verifican y preparan para despacho' se llama:",
                options: [
                    "Recepción",
                    "Almacenamiento",
                    "Consolidación de Pedidos",
                    "Picking por Olas"
                ],
                answer: 2,
                rationale: "La página 16 (Consolidación de Pedidos) define esta fase exactamente con esa descripción."
            },
            {
                q: "¿En qué momento del flujo se realiza el 'Control de Calidad' final?",
                options: [
                    "Durante la Recepción de la mercadería.",
                    "Antes de la salida (despacho).",
                    "Al momento de la localización del producto.",
                    "Solo en la zona de almacenamiento."
                ],
                answer: 1,
                rationale: "La página 17 (Control de Calidad) especifica que 'Se revisa el cumplimiento del pedido y las condiciones del producto antes de la salida'."
            },
            {
                q: "¿Qué tecnologías principales se utilizan para la 'trazabilidad total' en el área de picking?",
                options: [
                    "WMS, escáneres, códigos de barras y RFID.",
                    "Teléfonos fijos y correo electrónico.",
                    "Carros de picking y pallets.",
                    "Pasillos amplios y señalización visible."
                ],
                answer: 0,
                rationale: "La página 18 (Tecnología Aplicada) lista 'WMS, escáneres, códigos de barras y eventualmente RFID' para la trazabilidad."
            },
            {
                q: "¿Cuál de las siguientes se considera una 'Herramienta Utilizada' en el picking?",
                options: [
                    "Picking por voz.",
                    "Terminales portátiles y carros de picking.",
                    "Estanterías seguras.",
                    "Protocolos ante incidentes."
                ],
                answer: 1,
                rationale: "La página 19 (Herramientas Utilizadas) menciona 'Carros de picking, pallets, terminales portátiles...'"
            },
            {
                q: "La 'Infraestructura Física' de la bodega se caracteriza por:",
                options: [
                    "Pasillos amplios, estanterías seguras y señalización visible.",
                    "Tiempos de ciclo rápidos y baja tasa de error.",
                    "Picking por voz y visión asistida.",
                    "Supervisores, operarios y jefe de área."
                ],
                answer: 0,
                rationale: "La página 20 (Infraestructura Física) describe el área con 'Pasillos amplios, estanterías seguras, señalización visible'."
            },
            {
                q: "¿Cuál es el rol principal del 'Picker' en el equipo de picking?",
                options: [
                    "Gestión y planificación del área.",
                    "Control operativo y asignación de tareas.",
                    "Selección de productos.",
                    "Análisis semanal de KPIs."
                ],
                answer: 2,
                rationale: "La página 23 (Roles del Equipo) define el rol del 'Picker' como 'selección de productos'."
            },
            {
                q: "¿Para qué sirve la 'Capacitación Continua' del personal de picking?",
                options: [
                    "Para asegurar el cumplimiento de estándares de calidad, seguridad y productividad.",
                    "Para reemplazar el uso de tecnología WMS.",
                    "Únicamente para cumplir con la normativa legal.",
                    "Para decidir qué tipo de picking utilizar (zona, olas, etc.)."
                ],
                answer: 0,
                rationale: "La página 22 (Capacitación) indica que 'La formación continua asegura el cumplimiento de estándares de calidad, seguridad y productividad'."
            },
            {
                q: "¿Cuál de los siguientes es un 'Indicador Clave (KPI)' del área de picking?",
                options: [
                    "Nivel de satisfacción del proveedor.",
                    "Costo de la infraestructura física.",
                    "Tasa de error y tiempo de ciclo.",
                    "Número de EPP (Equipos de Protección) utilizados."
                ],
                answer: 2,
                rationale: "La página 24 (Indicadores Clave) lista 'Productividad, tasa de error, cumplimiento de pedido y tiempo de ciclo'."
            },
            {
                q: "¿Con qué frecuencia se analizan los KPIs del área de picking?",
                options: [
                    "Anualmente.",
                    "Semanalmente, mediante reportes del WMS.",
                    "Diariamente, en reuniones de retroalimentación.",
                    "Solo cuando ocurre un incidente de seguridad."
                ],
                answer: 1,
                rationale: "La página 25 (Medición de Desempeño) establece que 'Los KPIs se analizan semanalmente mediante reportes del sistema WMS'."
            },
            {
                q: "El diseño del área y las herramientas que buscan reducir lesiones y mejorar la comodidad del operario se refieren a:",
                options: [
                    "Protocolos ante incidentes.",
                    "Gestión documental.",
                    "Ergonomía.",
                    "Trazabilidad."
                ],
                answer: 2,
                rationale: "La página 28 (Ergonomía) describe esto como el 'diseño del área y las herramientas' para 'reducir lesiones y mejorar la comodidad'."
            },
            {
                q: "El uso de 'Señalización de Riesgo' (colores, letreros y luces) tiene como objetivo:",
                options: [
                    "Guiar las operaciones y prevenir accidentes.",
                    "Medir la productividad del picker.",
                    "Reemplazar al supervisor de área.",
                    "Acelerar el proceso de consolidación."
                ],
                answer: 0,
                rationale: "La página 29 (Señalización de Riesgo) indica que 'guían las operaciones y previenen accidentes'."
            },
            {
                q: "¿Qué sucede con los productos devueltos antes de reintegrarse al stock?",
                options: [
                    "Se envían directamente a la zona de despacho.",
                    "Se almacenan en la zona de picking por olas.",
                    "Pasan por un control de calidad.",
                    "Se registran como merma automáticamente."
                ],
                answer: 2,
                rationale: "La página 31 (Gestión de Devoluciones) aclara que 'Los productos devueltos pasan por control de calidad antes de reintegrarse al stock'."
            },
            {
                q: "¿Qué innovación tecnológica se está evaluando para reducir errores humanos en el picking?",
                options: [
                    "Carros de picking más grandes.",
                    "Estanterías más altas.",
                    "Picking por voz y visión asistida.",
                    "Nuevos uniformes y EPP."
                ],
                answer: 2,
                rationale: "La página 33 (Innovación Tecnológica) menciona que 'Se evalúa la incorporación de picking por voz y visión asistida'."
            },
            {
                q: "Un picking eficiente garantiza dos cosas fundamentales:",
                options: [
                    "La reducción de la infraestructura y el aumento de personal.",
                    "La continuidad del negocio y la fidelización de los clientes.",
                    "La eliminación total de errores y la automatización completa.",
                    "La dependencia de proveedores y la reducción de KPIs."
                ],
                answer: 1,
                rationale: "La página 50 (Conclusiones) cierra indicando que 'Un picking eficiente garantiza la continuidad del negocio y la fidelización de los clientes'."
            }
        ];


        let currentQuestionIndex = 0;
        let score = 0;
        let quizActive = true;
        const totalQuestions = quizData.length; // Total es 25

        // Selectores de elementos del DOM
        const $ = selector => document.querySelector(selector);
        const $all = selector => document.querySelectorAll(selector);

        const questionText = $("#question-text");
        const answerOptionsWrapper = $("#answer-options-wrapper");
        const questionCounter = $("#question-counter");
        const scoreDisplay = $("#score-display");
        const nextButton = $("#next-button");
        const rationaleBox = $("#rationale-box");
        const rationaleText = $("#rationale-text");
        const questionView = $("#question-view");
        const resultsView = $("#results-view");
        const restartButton = $("#restart-button");

        // Selectores para la pantalla de resultados
        const finalScoreBox = $("#final-score-box");
        const precisionBox = $("#precision-box");
        const correctCountEl = $("#correct-count");
        const incorrectCountEl = $("#incorrect-count");
        const totalSummaryEl = $("#total-summary"); 

        /**
         * Carga la pregunta actual en la UI
         */
        function loadQuestion() {
            if (currentQuestionIndex >= totalQuestions) {
                showResults();
                return;
            }

            const currentQuestion = quizData[currentQuestionIndex];
            
            quizActive = true;
            nextButton.classList.add('hidden');
            rationaleBox.classList.add('hidden');

            questionText.textContent = `${currentQuestionIndex + 1}. ${currentQuestion.q}`;
            questionCounter.textContent = `Pregunta ${currentQuestionIndex + 1} de ${totalQuestions}`;
            scoreDisplay.textContent = `Puntaje: ${score}`;
            
            answerOptionsWrapper.innerHTML = '';
            answerOptionsWrapper.classList.remove('options-disabled'); 
            
            currentQuestion.options.forEach((optionText, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'answer-option';
                optionDiv.textContent = optionText;
                optionDiv.setAttribute('data-index', index);
                
                optionDiv.addEventListener('click', () => checkAnswer(index, optionDiv));
                answerOptionsWrapper.appendChild(optionDiv);
            });
        }

        /**
         * Comprueba la respuesta, da feedback y muestra el botón Siguiente.
         */
        function checkAnswer(selectedIndex, selectedElement) {
            if (!quizActive) return; 
            quizActive = false; 

            const currentQuestion = quizData[currentQuestionIndex];
            const isCorrect = selectedIndex === currentQuestion.answer;

            answerOptionsWrapper.classList.add('options-disabled');

            const correctElement = $(`[data-index='${currentQuestion.answer}']`);

            if (isCorrect) {
                score++;
                selectedElement.classList.add('correct');
            } else {
                selectedElement.classList.add('incorrect');
                if (correctElement) {
                    correctElement.classList.add('correct'); 
                }
            }
            
            scoreDisplay.textContent = `Puntaje: ${score}`;
            rationaleText.textContent = currentQuestion.rationale;
            rationaleBox.classList.remove('hidden');
            nextButton.classList.remove('hidden'); 
        }

        function handleNext() {
            currentQuestionIndex++;
            loadQuestion();
        }

        /**
         * Muestra la pantalla de resultados con el formato solicitado.
         */
        function showResults() {
            questionView.classList.add('hidden');
            $("#controls").classList.add('hidden');
            $("#status-bar").classList.add('hidden');
            rationaleBox.classList.add('hidden');
            resultsView.classList.remove('hidden');
            
            const correctCount = score;
            const incorrectCount = totalQuestions - score;
            const precision = totalQuestions > 0 ? Math.round((correctCount / totalQuestions) * 100) : 0;

            finalScoreBox.textContent = `${correctCount}/${totalQuestions}`;
            precisionBox.textContent = `${precision}%`;
            correctCountEl.textContent = correctCount;
            incorrectCountEl.textContent = incorrectCount;
            totalSummaryEl.textContent = totalQuestions; 
        }

        /**
         * El botón de reinicio ahora navega a index.html
         */
        function restartQuiz() {
            window.location.href = 'index.html';
        }

        // Asignar Eventos
        nextButton.addEventListener('click', handleNext);
        restartButton.addEventListener('click', restartQuiz);

        // Iniciar el quiz
        loadQuestion();
    </script>
</body>
</html>